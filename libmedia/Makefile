# $Id: Makefile,v 1.9 2006/04/04 20:17:28 greear Exp $

BUILD = ../build

CXXFLAGS += -I. 
LDLIBS += -lm 

include $(BUILD)/Makefile.pre
# Auto-generated by LANforge...has VoiceAge defines in it.  If not using
# LANforge or VoiceAge, this can be an empty file. --Ben
include $(BUILD)/Makefile.cc_config

TARGET_LIBRARY = libmedia 

PACKAGES += RTP MEDIALIB SDP2 UTIL OPENSSL


MKSHLIB_INCDIRS += -L$(ROOT)/util/obj.$(TARGET_NAME)/ -L$(ROOT)/rtp/obj.$(TARGET_NAME)/ \
  -L$(ROOT)/sdp/sdp2/obj.$(TARGET_NAME)/ \
  -L$(ROOT)/contrib/Equivalence.$(OS_ARCH)/openh323-1.11.4/lib

MKSHLIB_LIBS += $(MKSHLIB_INCDIRS) -lstdc++ -lm -lvutil -lrtp -lm -lsdp2

ifeq ($(VOCAL_USE_SPEEX),yes)
MKSHLIB_INCDIRS += -L$(ROOT)/contrib/speex.$(TARGET_NAME)/build/lib
MKSHLIB_LIBS += -lspeex
INCDIRS += $(ROOT)/contrib/speex.$(TARGET_NAME)/build/include/speex
LIBDIRS += $(ROOT)/contrib/speex.$(TARGET_NAME)/build/lib
LDLIBS_LAST += -lspeex
endif

ifeq ($(VOCAL_USE_LANFORGE),yes)
LFDIR=../../..
INCDIRS += $(LFDIR)/include
LIBDIRS += $(LFDIR)/lib
LDLIBS_LAST += -lgcont
endif

ifeq ($(VOCAL_USE_VOICEAGE),yes)
#  Add new entries here if your VoiceAge files are found elsewhere.
MKSHLIB_INCDIRS += ${VOICEAGE_BASE}/source
ifeq ($(ISMINGW),1)
LIBDIRS += ${VOICEAGE_BASE}/Win32/libs
else
LIBDIRS += ${VOICEAGE_BASE}/Linux/libs
endif
INCDIRS += ${VOICEAGE_BASE}/source

MKSHLIB_LIBS += -lCodecLib -lg729a -lg729utils
LDLIBS_LAST += -lCodecLib -lg729a -lg729utils
endif


TESTPROGRAMS = 

SRC = \
Adaptor.cxx \
MediaDevice.cxx \
CodecG711U.cxx \
CodecG711a.cxx \
CodecAdaptor.cxx \
CodecG726_16.cxx \
CodecG726_24.cxx \
CodecG726_32.cxx \
CodecG726_40.cxx \
CodecTelEvent.cxx \
MediaCapability.cxx \
MediaController.cxx \
MediaSession.cxx \
NetworkRes.cxx \
SdpHandler.cxx \
MRtpSession.cxx

ifeq ($(VOCAL_USE_SPEEX),yes)
SRC += CodecSpeex.cxx
endif

ifeq ($(VOCAL_USE_VOICEAGE),yes)
SRC += CodecG729a.cxx
endif


#docs:	doc++/config.txt
#	doc++ --config doc++/config.txt

include $(BUILD)/Makefile.post

